<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <Configuration>Release</Configuration>
        <Configurations>Release</Configurations>
        <Platform>AnyCPU</Platform>
        <Platforms>AnyCPU</Platforms>

        <NeutralLanguage>en</NeutralLanguage>
        <LangVersion>8</LangVersion>
        <DebugSymbols>true</DebugSymbols>
        <Optimize>true</Optimize>
        <OutputPath>bin\</OutputPath>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <PackOnBuild>true</PackOnBuild>
        <OutputType>Library</OutputType>

        <Authors>François Raminosona, Laerdal</Authors>
        <Copyright>François Raminosona, Laerdal</Copyright>
        <Owners>François Raminosona, Laerdal</Owners>

        <SymbolPackageFormat>snupkg</SymbolPackageFormat>
        <IncludeSource>True</IncludeSource>
        <IncludeSymbols>True</IncludeSymbols>
        <PublishRepositoryUrl>true</PublishRepositoryUrl>
        <!-- sourcelink: Include PDB in the built .nupkg -->
        <AllowedOutputExtensionsInPackageBuildOutputFolder>$(AllowedOutputExtensionsInPackageBuildOutputFolder);.pdb</AllowedOutputExtensionsInPackageBuildOutputFolder>
        <!-- see : https://cezarypiatek.github.io/post/managing-output-in-sdk-projects/ -->
        <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
        <!-- sourcelink: Embed source files that are not tracked by the source control manager to the PDB -->
        <EmbedUntrackedSources>true</EmbedUntrackedSources>
        <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
        <PackageIcon>icon.png</PackageIcon>
        <PackageLicenseFile>LICENSE</PackageLicenseFile>
    </PropertyGroup>
    <ItemGroup>
        <None Include="../icon.png" Pack="true" PackagePath="\"/>
        <None Include="../LICENSE" Pack="true" PackagePath="\"/>
    </ItemGroup>

    <!-- NUGET ANDROID BASE -->
    <PropertyGroup>
        <AppDesignerFolder>Properties</AppDesignerFolder>
        <FileAlignment>512</FileAlignment>
        <TargetFrameworkVersion>v10.0</TargetFrameworkVersion>
        <AndroidClassParser>class-parse</AndroidClassParser>
        <AndroidCodegenTarget>XAJavaInterop1</AndroidCodegenTarget>
        <DebugType>pdbonly</DebugType>
        <DefineConstants>TRACE</DefineConstants>
    </PropertyGroup>
    <ItemGroup>
        <Compile Include="Properties\AssemblyInfo.cs"/>
    </ItemGroup>
    <ItemGroup>
        <Reference Include="Mono.Android" />
        <Reference Include="System" />
        <Reference Include="System.Core" />
        <Reference Include="System.Xml" />
    </ItemGroup>
    <ItemGroup>
        <PackageReference Include="NuGet.Build.Tasks.Pack" Version="5.8.0" PrivateAssets="all" />
    </ItemGroup>

    <!-- NUGET PROJECT SPECIFIC -->
    <PropertyGroup>
        <NugetPackageVariantName>Unset</NugetPackageVariantName>

        <ProjectGuid>{24AF7AA4-9A85-4662-8204-F3EB9BE67ECF}</ProjectGuid>
        <ProjectTypeGuids>{EFBA0AD7-5A72-4C68-AF49-83D382785DCF};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>

        <AssemblyName>Laerdal.Xamarin.FFmpeg.Android</AssemblyName>
        <RootNamespace>Laerdal.Xamarin.FFmpeg.Android</RootNamespace>
        <PackageId>Laerdal.Xamarin.FFmpeg.Android.$(NugetPackageVariantName)</PackageId>
        <Summary>Xamarin FFmpeg Android $(NugetPackageVariantName)</Summary>
        <Title>Laerdal.Xamarin.FFmpeg.Android.$(NugetPackageVariantName)</Title>
        <Description>Xamarin wrapper around mobile-ffmpeg for Android</Description>
        <PackageTags>Xamarin;FFmpeg;Android;$(NugetPackageVariantName)</PackageTags>
        <PackageProjectUrl>https://github.com/Laerdal/Laerdal.Xamarin.FFmpeg.Android</PackageProjectUrl>
        <RepositoryUrl>https://github.com/Laerdal/Laerdal.Xamarin.FFmpeg.Android.git</RepositoryUrl> 
        <RepositoryType>git</RepositoryType>

        <PackageVersion>1.0.0</PackageVersion>

        <PackageOutputPath Condition=" '$(PackageOutputPath)' == '' ">../$(AssemblyName).Output</PackageOutputPath>
    </PropertyGroup>
    <ItemGroup>
        <LibraryProjectZip Include="Jars\*.aar" />
        <TransformFile Include="Transforms\*.xml" />
    </ItemGroup>

    <Import Project="$(MSBuildExtensionsPath)\Xamarin\Android\Xamarin.Android.Bindings.targets" />
</Project>